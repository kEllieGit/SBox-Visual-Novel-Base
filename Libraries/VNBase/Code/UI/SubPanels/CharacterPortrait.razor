@using System;
@using Sandbox;
@using VNBase.Assets;

@namespace VNBase.UI
@inherits SubPanel

@if ( !Player.IsValid() )
{
    return;
}

<root class="portrait @( Player.State.SpeakingCharacter == Character ? "speaker" : "" )">
    <img src="@( $"{Character?.ActivePortraitPath}" )" alt=""/>
</root>

@code {
    #nullable enable
    public Character? Character { get; set; }

    protected override int BuildHash()
    {
        return HashCode.Combine( Character, Character?.ActivePortrait, Player?.State?.SpeakingCharacter );
    }
}
